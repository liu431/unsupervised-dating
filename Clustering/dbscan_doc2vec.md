DBSCAN on Doc2Vec Results
================
Adam Shelton
12/2/2019

## About the Data

``` r
doc2vec_data = read_csv(here("Data", "doc2vec_results.csv"))
```

    ## Warning: Missing column names filled in: 'X1' [1]

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
doc2vec_data %>% skim() %>% partition() %>% .$numeric %>% kable()
```

| skim\_variable | n\_missing | complete\_rate |         mean |          sd |          p0 |          p25 |          p50 |           p75 |         p100 | hist  |
| :------------- | ---------: | -------------: | -----------: | ----------: | ----------: | -----------: | -----------: | ------------: | -----------: | :---- |
| X1             |          0 |              1 | 9415.0000000 | 5436.185795 |    0.000000 | 4707.5000000 | 9415.0000000 | 14122.5000000 | 18830.000000 | ▇▇▇▇▇ |
| 0              |          0 |              1 |  \-0.8025479 |    1.919823 |  \-8.759495 |  \-2.0160187 |  \-0.7726917 |     0.4514620 |     7.446828 | ▁▂▇▂▁ |
| 1              |          0 |              1 |  \-0.0972683 |    2.200633 | \-11.876940 |  \-1.4925575 |  \-0.1197169 |     1.3303147 |    11.684785 | ▁▂▇▂▁ |
| 2              |          0 |              1 |    0.9147878 |    2.040364 |  \-7.570118 |  \-0.3892364 |    0.8955316 |     2.2195096 |    10.143706 | ▁▃▇▂▁ |
| 3              |          0 |              1 |    0.4386691 |    2.019612 |  \-7.522063 |  \-0.8598891 |    0.4044919 |     1.7499141 |     9.377688 | ▁▃▇▂▁ |
| 4              |          0 |              1 |  \-0.0972597 |    2.023266 |  \-8.324773 |  \-1.4072153 |  \-0.0705885 |     1.2118139 |     9.764031 | ▁▃▇▁▁ |
| 5              |          0 |              1 |  \-0.8774721 |    1.972004 |  \-8.775394 |  \-2.1689256 |  \-0.8199310 |     0.4068319 |     7.678488 | ▁▃▇▂▁ |
| 6              |          0 |              1 |  \-0.0537871 |    2.115566 | \-10.217341 |  \-1.3854213 |  \-0.0412877 |     1.3194127 |     9.344492 | ▁▂▇▂▁ |
| 7              |          0 |              1 |  \-1.2901325 |    2.052756 | \-10.419353 |  \-2.6107113 |  \-1.2718703 |     0.0568668 |     6.869813 | ▁▂▇▃▁ |
| 8              |          0 |              1 |  \-1.9002630 |    2.010330 | \-11.610354 |  \-3.2045911 |  \-1.8170797 |   \-0.5667696 |     7.816230 | ▁▂▇▂▁ |
| 9              |          0 |              1 |  \-1.8248217 |    2.007372 | \-10.355661 |  \-3.1297453 |  \-1.7962829 |   \-0.5062400 |    10.948217 | ▁▇▇▁▁ |
| 10             |          0 |              1 |  \-1.7253619 |    1.970682 |  \-9.336629 |  \-2.9814595 |  \-1.7021215 |   \-0.4512616 |     7.069542 | ▁▃▇▂▁ |
| 11             |          0 |              1 |  \-0.8024600 |    1.997955 |  \-8.660859 |  \-2.0983963 |  \-0.7838870 |     0.4798695 |     7.688631 | ▁▃▇▂▁ |
| 12             |          0 |              1 |    0.3558752 |    2.106156 |  \-9.030977 |  \-0.9616669 |    0.3294542 |     1.7049202 |     9.403492 | ▁▂▇▂▁ |
| 13             |          0 |              1 |    0.5887514 |    2.001401 |  \-8.793655 |  \-0.6859826 |    0.5780603 |     1.8786680 |     9.459628 | ▁▂▇▂▁ |
| 14             |          0 |              1 |  \-2.0843554 |    2.045255 | \-12.347400 |  \-3.3706843 |  \-2.0221953 |   \-0.7529038 |     5.886264 | ▁▁▇▅▁ |
| 15             |          0 |              1 |  \-0.5073121 |    1.992353 |  \-9.420696 |  \-1.8013165 |  \-0.4756435 |     0.7703293 |     8.557796 | ▁▂▇▂▁ |
| 16             |          0 |              1 |  \-1.2924014 |    2.013182 |  \-9.335217 |  \-2.5896739 |  \-1.2503301 |   \-0.0109914 |     7.206438 | ▁▃▇▂▁ |
| 17             |          0 |              1 |    0.3398160 |    2.035601 |  \-8.107718 |  \-0.9717538 |    0.3344125 |     1.6342172 |     9.209709 | ▁▃▇▂▁ |
| 18             |          0 |              1 |  \-0.1662657 |    2.068434 |  \-7.851413 |  \-1.4874490 |  \-0.1301335 |     1.1707693 |    10.510706 | ▁▆▇▁▁ |
| 19             |          0 |              1 |  \-0.5471834 |    1.947505 |  \-9.736012 |  \-1.8185098 |  \-0.5398403 |     0.6973338 |     7.674378 | ▁▂▇▃▁ |
| 20             |          0 |              1 |    0.4810196 |    2.113467 |  \-8.279591 |  \-0.8948546 |    0.4368906 |     1.8520616 |    13.815602 | ▁▇▇▁▁ |
| 21             |          0 |              1 |    0.6822610 |    2.109859 |  \-8.278626 |  \-0.6596091 |    0.6602792 |     2.0391321 |     9.897076 | ▁▂▇▂▁ |
| 22             |          0 |              1 |    0.2441453 |    2.127918 |  \-9.339266 |  \-1.1405452 |    0.2433481 |     1.6221518 |     8.216242 | ▁▂▇▅▁ |
| 23             |          0 |              1 |    1.6377514 |    2.027248 |  \-7.520004 |    0.3187341 |    1.5659136 |     2.9436335 |    13.953811 | ▁▆▇▁▁ |
| 24             |          0 |              1 |  \-0.4570117 |    2.031559 |  \-9.272442 |  \-1.7606605 |  \-0.4064504 |     0.8692418 |     7.451511 | ▁▂▇▃▁ |
| 25             |          0 |              1 |    0.2113429 |    1.952431 |  \-8.254311 |  \-1.0559110 |    0.2019110 |     1.4542334 |     9.181872 | ▁▂▇▂▁ |
| 26             |          0 |              1 |  \-0.7145947 |    2.013954 |  \-9.264404 |  \-2.0191986 |  \-0.6759786 |     0.5644716 |     8.270238 | ▁▂▇▂▁ |
| 27             |          0 |              1 |    0.1785066 |    2.016131 |  \-9.505078 |  \-1.1201910 |    0.1708700 |     1.4774904 |    12.299225 | ▁▃▇▁▁ |
| 28             |          0 |              1 |  \-1.4284919 |    2.087074 | \-11.375551 |  \-2.7950606 |  \-1.3934608 |   \-0.0373670 |     6.315119 | ▁▁▇▅▁ |
| 29             |          0 |              1 |  \-0.5070991 |    1.914201 |  \-8.889117 |  \-1.7181866 |  \-0.4671932 |     0.7296605 |     7.158527 | ▁▂▇▃▁ |
| 30             |          0 |              1 |  \-0.1869651 |    2.072173 |  \-9.362162 |  \-1.5040316 |  \-0.1666312 |     1.1528002 |     8.552914 | ▁▂▇▂▁ |
| 31             |          0 |              1 |  \-0.0596769 |    2.108742 |  \-8.915539 |  \-1.4149557 |  \-0.0534912 |     1.3172023 |     9.364590 | ▁▃▇▂▁ |
| 32             |          0 |              1 |  \-2.7829004 |    1.976894 | \-11.439304 |  \-4.0746899 |  \-2.6959380 |   \-1.4412345 |     5.468108 | ▁▂▇▃▁ |
| 33             |          0 |              1 |  \-0.3239509 |    2.053559 |  \-9.075216 |  \-1.6325552 |  \-0.2859880 |     1.0211187 |    11.178104 | ▁▅▇▁▁ |
| 34             |          0 |              1 |  \-1.8194924 |    2.053843 | \-16.821770 |  \-3.1458894 |  \-1.7691447 |   \-0.4998701 |     6.458547 | ▁▁▃▇▁ |
| 35             |          0 |              1 |  \-1.0254319 |    2.085672 | \-12.941059 |  \-2.3229911 |  \-0.9850980 |     0.3398136 |     8.154790 | ▁▁▇▅▁ |
| 36             |          0 |              1 |  \-1.2517855 |    1.965949 | \-11.930811 |  \-2.5030284 |  \-1.2162130 |     0.0140094 |     6.237109 | ▁▁▇▇▁ |
| 37             |          0 |              1 |    0.9277313 |    2.042075 |  \-7.671556 |  \-0.3968635 |    0.8621155 |     2.2302840 |    11.291755 | ▁▃▇▁▁ |
| 38             |          0 |              1 |  \-1.4285972 |    1.983340 |  \-9.847545 |  \-2.6972234 |  \-1.3889900 |   \-0.1427626 |     6.620040 | ▁▂▇▃▁ |
| 39             |          0 |              1 |  \-1.0234819 |    2.022673 |  \-8.968302 |  \-2.3392088 |  \-0.9712529 |     0.2676006 |     7.148078 | ▁▃▇▂▁ |
| 40             |          0 |              1 |    0.7282630 |    2.167746 |  \-8.848389 |  \-0.6520728 |    0.7111445 |     2.1228041 |     9.365360 | ▁▂▇▃▁ |
| 41             |          0 |              1 |    2.4059308 |    1.987139 |  \-6.116013 |    1.0999660 |    2.3504630 |     3.6748345 |    14.999642 | ▁▇▇▁▁ |
| 42             |          0 |              1 |  \-2.6238301 |    2.011239 | \-11.056141 |  \-3.9623567 |  \-2.5669718 |   \-1.2786585 |     5.533616 | ▁▂▇▃▁ |
| 43             |          0 |              1 |    2.0800900 |    1.900849 |  \-6.504767 |    0.8295566 |    2.0373447 |     3.2913976 |    12.982121 | ▁▅▇▁▁ |
| 44             |          0 |              1 |    0.7633182 |    1.987884 |  \-7.778722 |  \-0.5169252 |    0.7263740 |     2.0517575 |    10.812074 | ▁▃▇▁▁ |
| 45             |          0 |              1 |    1.3565665 |    1.991412 |  \-6.457782 |    0.0674950 |    1.3371814 |     2.6381706 |    12.244174 | ▁▆▇▁▁ |
| 46             |          0 |              1 |    2.2361566 |    1.928286 |  \-5.437455 |    0.9494655 |    2.1799820 |     3.4623840 |    12.332368 | ▁▆▇▁▁ |
| 47             |          0 |              1 |    0.5190868 |    2.061919 |  \-9.026671 |  \-0.7988477 |    0.4907651 |     1.8658545 |     8.957437 | ▁▂▇▃▁ |
| 48             |          0 |              1 |    0.3960733 |    2.074928 |  \-9.066049 |  \-0.9368054 |    0.3644614 |     1.7438142 |     9.536597 | ▁▂▇▂▁ |
| 49             |          0 |              1 |  \-0.6431856 |    2.076000 |  \-9.067106 |  \-1.9667438 |  \-0.6181759 |     0.6998942 |     8.780501 | ▁▃▇▂▁ |

``` r
doc2vec_data %>% select(-X1) %>% {ggcorrplot(cor(.), p.mat = cor_pmat(.), hc.order = TRUE, insig = "blank")}
```

![](dbscan_doc2vec_files/figure-gfm/data-1.png)<!-- -->

## Clusterability

``` r
clusterability = doc2vec_data %>% select(-X1) %>% get_clust_tendency(n = 50)
#clusterability$plot
```

The Doc2Vec data has a Hopkins Statistic of 0.723.

## Identifying Outliers with DBSCAN

### Building a DBSCAN Model

``` r
doc2vec_data %>% select(-X1) %>% kNNdistplot(k = 5)
```

![](dbscan_doc2vec_files/figure-gfm/dbscan-1.png)<!-- -->

``` r
dbscan_mod = doc2vec_data %>% select(-X1) %>% dbscan(16, 5)
doc2vec_data %>% select(-X1) %>% {fviz_cluster(dbscan_mod, data = .)}
```

![](dbscan_doc2vec_files/figure-gfm/dbscan-2.png)<!-- -->

``` r
dbscan_results = doc2vec_data %>% bind_cols(enframe(dbscan_mod$cluster, name = NULL, value = "cluster"))
```

The DBSCAN model identified 794 outliers, 4.22% of the observations in
the Doc2Vec results.

### Interpreting Outliers

``` r
dbscan_results %>% select(-X1) %>% group_by(cluster) %>% summarise_all(mean) %>% kable(caption = "Mean by Cluster")
```

| cluster |           0 |           1 |         2 |         3 |           4 |           5 |           6 |          7 |          8 |          9 |         10 |          11 |        12 |        13 |         14 |          15 |         16 |        17 |          18 |          19 |        20 |        21 |        22 |       23 |          24 |        25 |          26 |        27 |         28 |          29 |          30 |          31 |         32 |          33 |         34 |          35 |         36 |        37 |         38 |          39 |        40 |       41 |         42 |       43 |        44 |       45 |       46 |        47 |        48 |          49 |
| ------: | ----------: | ----------: | --------: | --------: | ----------: | ----------: | ----------: | ---------: | ---------: | ---------: | ---------: | ----------: | --------: | --------: | ---------: | ----------: | ---------: | --------: | ----------: | ----------: | --------: | --------: | --------: | -------: | ----------: | --------: | ----------: | --------: | ---------: | ----------: | ----------: | ----------: | ---------: | ----------: | ---------: | ----------: | ---------: | --------: | ---------: | ----------: | --------: | -------: | ---------: | -------: | --------: | -------: | -------: | --------: | --------: | ----------: |
|       0 | \-1.4608879 | \-0.9928459 | 0.7044734 | 0.0261298 |   0.0230705 | \-1.4573735 | \-0.2378619 | \-1.715948 | \-2.696626 | \-1.530764 | \-1.719476 | \-0.5738460 | 0.1936496 | 0.4703035 | \-2.783925 | \-0.7533440 | \-1.492069 | 0.8783133 |   0.0202250 | \-0.1991038 | 0.5999307 | 1.0771942 | 0.0944768 | 2.218263 | \-0.8791301 | 0.4824051 | \-0.4189930 | 0.2487932 | \-2.043837 | \-1.0737495 | \-1.0634009 |   0.3165649 | \-3.528191 | \-0.0247567 | \-2.492187 | \-1.7903276 | \-1.900645 | 1.5100291 | \-2.093070 | \-0.8011871 | 0.6210537 | 2.931887 | \-2.482509 | 2.462905 | 0.9201329 | 1.586438 | 2.653921 | 0.7223838 | 0.7148587 | \-0.7580210 |
|       1 | \-0.7735674 | \-0.0578444 | 0.9240460 | 0.4568294 | \-0.1025567 | \-0.8519444 | \-0.0456840 | \-1.271388 | \-1.865207 | \-1.837766 | \-1.725621 | \-0.8125237 | 0.3630165 | 0.5939655 | \-2.053560 | \-0.4964817 | \-1.283612 | 0.3161110 | \-0.1744751 | \-0.5625061 | 0.4757850 | 0.6648758 | 0.2507338 | 1.612197 | \-0.4384298 | 0.1994106 | \-0.7276073 | 0.1754125 | \-1.401404 | \-0.4821548 | \-0.1483838 | \-0.0762393 | \-2.750092 | \-0.3371216 | \-1.789880 | \-0.9917607 | \-1.223222 | 0.9020982 | \-1.399347 | \-1.0332674 | 0.7329824 | 2.382778 | \-2.630051 | 2.063238 | 0.7564152 | 1.346447 | 2.217766 | 0.5101375 | 0.3820401 | \-0.6381305 |

Mean by Cluster

``` r
dbscan_results %>% select(-X1) %>% group_by(cluster) %>% summarise_all(sd) %>% kable(caption = "Standard Deviation by Cluster")
```

| cluster |        0 |        1 |        2 |        3 |        4 |        5 |        6 |        7 |        8 |        9 |       10 |       11 |       12 |       13 |       14 |       15 |       16 |       17 |       18 |       19 |       20 |       21 |       22 |       23 |       24 |       25 |       26 |       27 |       28 |       29 |       30 |      31 |       32 |       33 |       34 |       35 |       36 |       37 |       38 |       39 |       40 |       41 |       42 |       43 |       44 |       45 |       46 |       47 |       48 |       49 |
| ------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | ------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: | -------: |
|       0 | 2.483867 | 2.977817 | 2.833031 | 2.699586 | 2.688512 | 2.646988 | 2.906569 | 2.733653 | 2.629592 | 2.627869 | 2.683620 | 2.667885 | 2.849468 | 2.706117 | 2.705093 | 2.598391 | 2.652855 | 2.841206 | 2.785807 | 2.613916 | 2.914400 | 2.923798 | 3.009172 | 2.783580 | 2.860098 | 2.671877 | 2.718594 | 2.776053 | 2.828119 | 2.614233 | 2.790249 | 2.81838 | 2.590323 | 2.668979 | 2.903463 | 2.855958 | 2.741563 | 2.791911 | 2.595449 | 2.721974 | 2.938476 | 2.833736 | 2.641655 | 2.541280 | 2.677135 | 2.746194 | 2.578247 | 2.827843 | 2.766952 | 2.950459 |
|       1 | 1.885946 | 2.151566 | 1.997858 | 1.982460 | 1.988806 | 1.932997 | 2.073560 | 2.015544 | 1.971337 | 1.974673 | 1.933367 | 1.962704 | 2.067116 | 1.964516 | 2.005740 | 1.960761 | 1.979915 | 1.989430 | 2.030751 | 1.911483 | 2.071059 | 2.065053 | 2.080435 | 1.983556 | 1.985214 | 1.913777 | 1.976259 | 1.976023 | 2.044155 | 1.873561 | 2.026158 | 2.07046 | 1.938972 | 2.021247 | 2.003128 | 2.038631 | 1.919709 | 1.998837 | 1.946878 | 1.985770 | 2.127397 | 1.938241 | 1.978742 | 1.865907 | 1.951769 | 1.950971 | 1.892535 | 2.021183 | 2.038032 | 2.028831 |

Standard Deviation by Cluster

``` r
dbscan_results %>% select(-X1) %>% group_by(cluster) %>% summarise_all(median) %>% kable(caption = "Median by Cluster")
```

| cluster |           0 |           1 |         2 |           3 |           4 |           5 |           6 |          7 |          8 |          9 |         10 |          11 |        12 |        13 |         14 |          15 |         16 |        17 |          18 |          19 |        20 |        21 |        22 |       23 |          24 |        25 |          26 |        27 |         28 |          29 |          30 |          31 |         32 |          33 |         34 |          35 |         36 |        37 |         38 |          39 |        40 |       41 |         42 |       43 |        44 |       45 |       46 |       47 |        48 |          49 |
| ------: | ----------: | ----------: | --------: | ----------: | ----------: | ----------: | ----------: | ---------: | ---------: | ---------: | ---------: | ----------: | --------: | --------: | ---------: | ----------: | ---------: | --------: | ----------: | ----------: | --------: | --------: | --------: | -------: | ----------: | --------: | ----------: | --------: | ---------: | ----------: | ----------: | ----------: | ---------: | ----------: | ---------: | ----------: | ---------: | --------: | ---------: | ----------: | --------: | -------: | ---------: | -------: | --------: | -------: | -------: | -------: | --------: | ----------: |
|       0 | \-1.3564171 | \-0.9039588 | 0.6432474 | \-0.0930338 | \-0.0584771 | \-1.5360244 | \-0.2005533 | \-1.684548 | \-2.695869 | \-1.487603 | \-1.684847 | \-0.6328357 | 0.3037327 | 0.5303585 | \-2.731851 | \-0.6753629 | \-1.563594 | 0.8491999 |   0.0504245 | \-0.3297831 | 0.6089357 | 1.1137238 | 0.1178290 | 2.336695 | \-0.8826196 | 0.5417228 | \-0.3750582 | 0.1313453 | \-2.068400 | \-0.9732542 | \-1.0563702 |   0.3981676 | \-3.466359 | \-0.1136112 | \-2.398923 | \-1.8696348 | \-1.886759 | 1.5675182 | \-2.089801 | \-0.8037757 | 0.5509411 | 2.873925 | \-2.522971 | 2.416485 | 0.9808993 | 1.593259 | 2.534297 | 0.786010 | 0.6239353 | \-0.6297835 |
|       1 | \-0.7533173 | \-0.0953446 | 0.9035266 |   0.4175225 | \-0.0706796 | \-0.7945564 | \-0.0375791 | \-1.258552 | \-1.790024 | \-1.805103 | \-1.702742 | \-0.7885386 | 0.3323898 | 0.5789791 | \-1.999579 | \-0.4703946 | \-1.243695 | 0.3223379 | \-0.1370026 | \-0.5507198 | 0.4330419 | 0.6485745 | 0.2460087 | 1.545251 | \-0.3937523 | 0.1944135 | \-0.6856672 | 0.1717378 | \-1.373963 | \-0.4521464 | \-0.1443764 | \-0.0630623 | \-2.673838 | \-0.2916906 | \-1.746215 | \-0.9636318 | \-1.199906 | 0.8414133 | \-1.368523 | \-0.9781686 | 0.7181349 | 2.325384 | \-2.568079 | 2.027306 | 0.7222362 | 1.328683 | 2.167657 | 0.483912 | 0.3559267 | \-0.6179834 |

Median by Cluster
